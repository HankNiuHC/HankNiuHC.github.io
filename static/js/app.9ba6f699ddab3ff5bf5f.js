webpackJsonp([8],{"7zck":function(t,e){},IcnI:function(t,e,n){"use strict";var o=n("Xxa5"),a=n.n(o),r=n("exGp"),i=n.n(r),s=n("7+uW"),l=n("NYxO"),c=n("22C0"),u=n.n(c);s.default.use(l.a),e.a=new l.a.Store({state:{logIn:!1,token:null,role:null,name:null,factory:null,department:null,workshop:null},mutations:{login_method:function(){var t=i()(a.a.mark(function t(e,n){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.logIn=!0,e.token=n.token,e.role=n.role,e.name=n.name,e.factory=n.factory,e.department=n.department,e.workshop=n.workshop,u.a.setItem("token",n.token).catch(function(t){console.log(t)}),u.a.setItem("role",n.role).catch(function(t){console.log(t)}),u.a.setItem("name",n.name).catch(function(t){console.log(t)}),u.a.setItem("factory",n.factory).catch(function(t){console.log(t)}),u.a.setItem("department",n.department).catch(function(t){console.log(t)}),u.a.setItem("workshop",n.workshop).catch(function(t){console.log(t)});case 13:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),logout_method:function(){var t=i()(a.a.mark(function t(e){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.logIn=!1,e.token=null,e.role=null,e.name=null,e.factory=null,e.department=null,e.workshop=null,u.a.removeItem("token").catch(function(t){console.log(t)}),u.a.removeItem("role").catch(function(t){console.log(t)}),u.a.removeItem("name").catch(function(t){console.log(t)}),u.a.removeItem("factory").catch(function(t){console.log(t)}),u.a.removeItem("department").catch(function(t){console.log(t)}),u.a.removeItem("workshop").catch(function(t){console.log(t)});case 13:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},actions:{},modules:{}})},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),a=n("22C0"),r=n.n(a),i={name:"App",data:function(){return{homeLink:"/",appsLink:"/task",drawer:!1,items1:[{title:"仪表板",icon:"mdi-view-dashboard",link:"/allot"},{title:"待办任务",icon:"mdi-account-hard-hat",link:"/task"},{title:"任务移交",icon:"mdi-transit-transfer",link:"/trans"},{title:"工具箱",icon:"mdi-tools",link:"/tools"}],items2:[{title:"仪表板",icon:"mdi-view-dashboard",link:"/"},{title:"待办任务",icon:"mdi-account-hard-hat",link:"/task"},{title:"任务分发",icon:"mdi-clipboard-list-outline",link:"/allot"},{title:"任务移交",icon:"mdi-transit-transfer",link:"/trans"},{title:"工具箱",icon:"mdi-tools",link:"/tools"}]}},mounted:function(){},methods:{goBack:function(){this.$router.go(-1)},clickFn:function(){this.$router.push({name:"Login"})},logOut:function(){this.$store.commit("logout_method"),this.drawer=!1}},computed:{logIn:function(){return this.$store.state.logIn},name:function(){return this.$store.state.name},role:function(){return this.$store.state.role},factory:function(){return this.$store.state.factory},department:function(){return this.$store.state.department},workshop:function(){return this.$store.state.workshop}},created:function(){var t=this;r.a.getItem("token").then(function(e){e&&(t.$store.state.logIn=!0,t.$store.state.token=e)}).catch(function(t){console.log(t)}),r.a.getItem("role").then(function(e){e&&(t.$store.state.role=e)}).catch(function(t){console.log(t)}),r.a.getItem("name").then(function(e){e&&(t.$store.state.name=e)}).catch(function(t){console.log(t)}),r.a.getItem("factory").then(function(e){e&&(t.$store.state.factory=e)}).catch(function(t){console.log(t)}),r.a.getItem("department").then(function(e){e&&(t.$store.state.department=e)}).catch(function(t){console.log(t)}),r.a.getItem("workshop").then(function(e){e&&(t.$store.state.workshop=e)}).catch(function(t){console.log(t)})}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-app-bar",{attrs:{app:"",src:"./static/bg-2.jpg",dark:""},on:{click:function(e){t.logIn?t.drawer=!t.drawer:t.clickFn()}}},[n("div",{staticClass:"d-flex align-center"},[n("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Logo",contain:"",src:"./static/WLogo.png",transition:"scale-transition",width:"40"}})],1),t._v(" "),n("v-toolbar-title",[t._v("现场作业管理系统")]),t._v(" "),n("v-spacer"),t._v(" "),n("span",{staticClass:"caption"},[t._v("UAT-")]),t._v(" "),t.logIn?n("span",{staticClass:"mr-2"},[t._v(t._s(t.name))]):t._e(),t._v(" "),t.logIn?n("v-btn",{attrs:{icon:"",large:""}},[n("v-avatar",{attrs:{size:"42px",item:"",color:"grey lighten-3"},on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}},[1===t.role?n("v-img",{attrs:{src:"./static/worker.png",alt:"Vuetify"}}):2===t.role?n("v-img",{attrs:{src:"./static/leader.png",alt:"Vuetify"}}):t._e()],1)],1):n("v-btn",{attrs:{icon:"",large:""}},[n("v-avatar",{attrs:{size:"42px",item:""},on:{click:function(e){return e.stopPropagation(),t.clickFn()}}},[n("v-icon",{attrs:{large:""}},[t._v("mdi-account-circle")])],1)],1)],1),t._v(" "),n("v-main",[n("v-container",{staticClass:"px-0",attrs:{fluid:""}},[n("router-view")],1)],1),t._v(" "),n("v-bottom-navigation",{attrs:{fixed:"",grow:""}},[n("v-btn",{staticStyle:{height:"56px"},on:{click:t.goBack}},[n("v-icon",{attrs:{medium:""}},[t._v("mdi-arrow-left")])],1),t._v(" "),n("v-btn",{staticStyle:{height:"56px"},attrs:{to:t.appsLink}},[n("v-icon",{attrs:{medium:""}},[t._v("mdi-briefcase-outline")])],1),t._v(" "),n("v-btn",{staticStyle:{height:"56px"},attrs:{to:t.homeLink}},[n("v-icon",{attrs:{medium:""}},[t._v("mdi-home")])],1)],1),t._v(" "),n("v-navigation-drawer",{attrs:{dark:"",fixed:"",app:"",touchless:"","disable-resize-watcher":"",width:"180",src:"./static/bg-2.jpg"},scopedSlots:t._u([{key:"append",fn:function(){return[n("div",{staticClass:"pa-6"},[n("v-btn",{attrs:{color:"grey darken-1",block:""},on:{click:t.logOut}},[t._v("退出登录")])],1)]},proxy:!0}]),model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-list",[n("v-list-item",[n("v-list-item-avatar",[1===t.role?n("v-img",{attrs:{src:"./static/worker.png"}}):2===t.role?n("v-img",{attrs:{src:"./static/leader.png"}}):t._e()],1)],1),t._v(" "),n("v-list-item",{attrs:{link:""}},[n("v-list-item-content",[1===t.role?n("v-list-item-title",{staticClass:"title"},[t._v("操作员: "+t._s(t.name))]):2===t.role?n("v-list-item-title",{staticClass:"title"},[t._v("领班: "+t._s(t.name))]):t._e(),t._v(" "),n("v-list-item-subtitle",[t._v(t._s(t.factory)+" "+t._s(t.department)+" "+t._s(t.workshop))])],1)],1)],1),t._v(" "),n("v-divider"),t._v(" "),n("v-list",{attrs:{nav:"",dense:""}},[n("v-list-item-group",[t._l(t.items1,function(e,o){return 1===t.role?n("v-list-item",{key:o,attrs:{to:e.link}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s(e.icon)}})],1),t._v(" "),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(e.title)}})],1)],1):t._e()}),t._v(" "),t._l(t.items2,function(e,o){return 2===t.role?n("v-list-item",{key:o,attrs:{to:e.link}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s(e.icon)}})],1),t._v(" "),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(e.title)}})],1)],1):t._e()})],2)],1)],1)],1)},staticRenderFns:[]},l=n("VU/8")(i,s,!1,null,null,null).exports,c=n("YaEn"),u=n("3EgV"),p=n.n(u),d=(n("7zck"),n("cKc3")),m=(n("csSS"),n("IcnI")),v=n("Nn+k"),f=n.n(v);n("Ainv");o.default.config.productionTip=!1,o.default.use(p.a),o.default.use(f.a,{closeButtonContent:"关闭",autoTransitionSetting:!0});e.default=new p.a({icons:{iconfont:"mdi"}});o.default.prototype.$axios=d.a,o.default.prototype.transXml=function(t){var e=(new(n("SFXu"))).xml2js(t.data).string.__text;return JSON.parse(e)},o.default.prototype.setcalendar=function(t,e,n){var o="content://com.android.calendar/calendars",a=plus.android.importClass("android.net.Uri"),r=plus.android.importClass("java.util.Calendar"),i=plus.android.runtimeMainActivity(),s=plus.android.invoke(i.getContentResolver(),"query",a.parse(o),null,null,null,null),l=plus.android.invoke(s,"getCount"),c=plus.android.importClass("java.util.TimeZone"),u=plus.android.invoke(c.getDefault(),"getID"),p=plus.android.importClass("android.content.ContentValues");if(l<=0){var d=new p,m=plus.android.invoke(a.parse(o),"buildUpon"),v=plus.android.importClass("android.provider.CalendarContract");plus.android.invoke(m,"appendQueryParameter",v.CALLER_IS_SYNCADAPTER,"true"),plus.android.invoke(m,"appendQueryParameter","account_name","someone@something.com"),plus.android.invoke(m,"appendQueryParameter","account_type","com.android.exchange"),d.put("name","someone"),d.put("account_name","someone@something.com"),d.put("account_type","com.android.exchange"),d.put("calendar_displayName","someone_calendar"),d.put("visible",1),d.put("calendar_color","-9206951"),d.put("calendar_access_level","700"),d.put("sync_events",1),d.put("calendar_timezone",u),d.put("ownerAccount","someone@something.com"),d.put("canOrganizerRespond",0),plus.android.invoke(i.getContentResolver(),"insert",plus.android.invoke(m,"build"),d),s=plus.android.invoke(i.getContentResolver(),"query",a.parse(o),null,null,null,null),l+=1}plus.android.invoke(s,"moveToLast");var f=plus.android.invoke(s,"getString",plus.android.invoke(s,"getColumnIndex","_id")),g=new p,h=r.getInstance(),k=plus.android.invoke(plus.android.invoke(h,"getTime"),"getTime");h.setTimeInMillis(k+60*n*1e3);var w=plus.android.invoke(plus.android.invoke(h,"getTime"),"getTime");g.put("title",t),g.put("description",e),g.put("calendar_id",f),g.put("dtstart",w),g.put("dtend",w),g.put("hasAlarm",1),g.put("eventTimezone",u);var _=plus.android.invoke(i.getContentResolver(),"insert",a.parse("content://com.android.calendar/events"),g),y=plus.android.invoke(_,"getLastPathSegment"),I=new p;I.put("event_id",y),I.put("minutes","0"),I.put("method","1"),plus.android.invoke(i.getContentResolver(),"insert",a.parse("content://com.android.calendar/reminders"),I)},o.default.prototype.setAlarm=function(t,e,n,o,a,r){plus.nativeUI.toast("#"+r+"釜:"+a+" 计时开始");var i=plus.android.runtimeMainActivity(),s="alarm_receiver_"+Math.ceil(1e7*Math.random()),l=(plus.android.importClass("android.os.Vibrator"),plus.android.implements("io.dcloud.android.content.BroadcastReceiver",{onReceive:function(t,s){null!=s&&(plus.push.createMessage("提醒","alarm",{title:"闹铃提醒"}),plus.device.setVolume(e),plus.device.beep(n),i.getSystemService(h.VIBRATOR_SERVICE).vibrate(o),plus.nativeUI.alert("#"+r+"釜:"+a+" 计时时间到"),i.unregisterReceiver(l),plus.device.setWakelock(!1))}})),c=new(plus.android.importClass("android.content.IntentFilter"))(s);i.registerReceiver(l,c);var u=plus.android.importClass("java.util.Calendar"),p=u.getInstance();p.setTimeInMillis(Date.parse(new Date)),p.add(u.SECOND,t);var d=new(plus.android.importClass("android.content.Intent"))(s),m=plus.android.importClass("android.app.PendingIntent"),v=Math.ceil(1e7*Math.random()),f=m.getBroadcast(i,v,d,0),g=plus.android.importClass("android.app.AlarmManager"),h=plus.android.importClass("android.content.Context");i.getSystemService(h.ALARM_SERVICE).setExactAndAllowWhileIdle(g.RTC_WAKEUP,p.getTimeInMillis(),f),plus.device.setWakelock(!0)},r.a.config({name:"RL-Data",storeName:"Data"}),new o.default({router:c.a,store:m.a,vuetify:new p.a,render:function(t){return t(l)}}).$mount("#app")},UJ19:function(t,e){},VsUZ:function(t,e,n){"use strict";e.n=function(){m.a.replace({path:"/login",query:{redirect:m.a.currentRoute.fullPath}})},e.a=function(t,e){return f({UserId:t,Password:e,Type:"UserLogin"})},e.f=function(){return v({Type:"getAllPendingTask"})},e.g=function(t){return v({Type:"getAllPendingTask",CaldronNum:t})},e.e=function(t,e){return v({Type:"getAllPendingTask",CaldronNum:t,RouteOprId:e})},e.d=function(t){return v({Type:"getAllMyPendingTask",CaldronNum:t})},e.c=function(t,e){return v({Type:"getAllMyPendingTask",CaldronNum:t,RouteOprId:e})},e.h=function(t){return v({Type:"getOprParm",RouteOprAction:t})},e.l=function(t,e){return v({Type:"setOprParm",RouteOprActionParm:t,RouteOprAction:e})},e.k=function(){return v({Type:"getDistributableWorkers"})},e.j=function(){return v({Type:"getMyPendingTask"})},e.o=function(t,e){return v({Type:"taskAssign",UserID:t,TaskList:e})},e.i=function(){return v({Type:"getMyTansferTask"})},n.d(e,"p",function(){return h}),e.m=function(t){return v({Type:"startOprActionParm",RouteOprActionParm:t})},e.b=function(t){return v({Type:"endOprActionParm",RouteOprActionParm:t})};var o=n("Xxa5"),a=n.n(o),r=n("//Fk"),i=n.n(r),s=n("exGp"),l=n.n(s),c=n("mvHQ"),u=n.n(c),p=n("cKc3"),d=n("IcnI"),m=n("YaEn");function v(t){var e=new URLSearchParams,n={Token:d.a.state.token||""},o=void 0;for(o in t)n[o]=t[o];return e.append("json",u()(n)),p.a.request({url:"http://192.168.3.218/WebService.asmx/execute",method:"post",data:e})}function f(t){var e=new URLSearchParams,n=new Object,o=void 0;for(o in t)n[o]=t[o];return e.append("json",u()(n)),p.a.request({url:"http://192.168.3.218/WebService.asmx/execute",method:"post",data:e})}var g,h=(g=l()(a.a.mark(function t(e,n){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new i.a(function(t,o){var a=new FormData;a.append("file",e,n),p.a.post("http://192.168.3.217:88/singleUpload",a).then(function(e){t(e.data)}).catch(function(t){o(t.data)})}));case 1:case"end":return t.stop()}},t,this)})),function(t,e){return g.apply(this,arguments)})},YaEn:function(t,e,n){"use strict";var o=n("7+uW"),a=n("/ocq"),r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-carousel",{attrs:{"hide-delimiters":"",height:"200",cycle:""}},t._l(t.items,function(t,e){return n("v-carousel-item",{key:e,attrs:{src:t.src}})}),1),t._v(" "),n("v-banner",{staticClass:"mt-5",attrs:{"single-line":""},scopedSlots:t._u([{key:"actions",fn:function(){return[n("v-btn",{attrs:{color:"primary",text:""},on:{click:t.goTask}},[t._v("\n        开始\n      ")])]},proxy:!0}])},[n("v-icon",{attrs:{slot:"icon",color:"warning",size:"36"},slot:"icon"},[t._v("\n      mdi-wifi-strength-alert-outline\n    ")]),t._v("\n    开始待办任务\n\n    ")],1),t._v(" "),n("v-row",{staticClass:"pt-16"},[n("v-card-text",{staticStyle:{height:"100px",position:"relative"}},[n("v-btn",{attrs:{absolute:"",dark:"",fab:"",top:"",right:"",color:"green"},on:{click:t.reLoad}},[n("v-icon",[t._v("mdi-refresh")])],1)],1)],1)],1)},staticRenderFns:[]};var i=n("VU/8")({data:function(){return{items:[{src:"http://www.xarlm.com/repository/image/E03V6USKRqaFbB-uUIFNEQ.jpg_560xaf.jpg"},{src:"http://www.xarlm.com/repository/image/qwu2754NS46QBxWJkdKOPw.jpg_560xaf.jpg"},{src:"http://www.xarlm.com/repository/image/ZFP86BWnSOeUDoYjgBQRUA.png_560xaf.png"},{src:"http://www.xarlm.com/img/051.jpg"},{src:"http://www.xarlm.com/img/052.jpg"},{src:"http://www.xarlm.com/img/054.jpg"},{src:"http://www.xarlm.com/img/111.png"}],cards:[{title:"任务分发",flex:6},{title:"开始工作",flex:6},{title:"个人中心",flex:6},{title:"退出登录",flex:6}]}},methods:{goTask:function(){this.$router.push({name:"test"})},reLoad:function(){this.$router.go(0)}}},r,!1,function(t){n("UJ19")},null,null).exports,s=n("IcnI");o.default.use(a.a);var l=[{path:"/",name:"HelloWorld",component:i},{path:"/login",name:"Login",component:function(){return n.e(1).then(n.bind(null,"xJsL"))}},{path:"/task",name:"Task",meta:{requireAuth:!0,roles:[1,2]},component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"l98k"))}},{path:"/allot",name:"Allot",meta:{requireAuth:!0,roles:[1,2]},component:function(){return n.e(6).then(n.bind(null,"+hLo"))}},{path:"/tools",name:"Tools",component:function(){return n.e(4).then(n.bind(null,"TOt5"))}},{path:"/trans",name:"Trans",meta:{requireAuth:!0,roles:[1,2]},component:function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"12n7"))}},{path:"/test",name:"test",component:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"EXDq"))}}],c=new a.a({routes:l});c.beforeEach(function(t,e,n){t.meta.requireAuth?t.meta.roles.includes(s.a.state.role)?s.a.state.token?n():(plus.nativeUI.toast("请登录"),n({path:"/login",query:{redirect:t.fullPath}})):s.a.state.token?plus.nativeUI.alert("没有权限","权限验证","确定"):n({path:"login",query:{redirect:t.fullPath}}):n()});e.a=c},cKc3:function(t,e,n){"use strict";var o=n("mtWM"),a=n.n(o),r=n("/Luh"),i=(n.n(r),n("YaEn"));n("VsUZ");a.a.defaults.timeout=2e4,a.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",a.a.interceptors.response.use(function(t){return 200===t.status?r.Promise.resolve(t):r.Promise.reject(t)},function(t){if(t.response.status){switch(t.response.status){case 401:i.a.replace({path:"/login",query:{redirect:i.a.currentRoute.fullPath}});break;case 403:plus.nativeUI.toast("登录过期，请重新登录"),setTimeout(function(){i.a.replace({path:"/login",query:{redirect:i.a.currentRoute.fullPath}})},1e3);break;default:var e;e=s(t.response.status),plus.nativeUI.toast(e)}return r.Promise.reject(t.response)}return r.Promise.reject(t.response)}),e.a=a.a;var s=function(t){var e="";switch(t){case 400:e="请求错误(400)";break;case 401:e="未授权，请重新登录(401)";break;case 403:e="拒绝访问(403)";break;case 404:e="请求出错(404)";break;case 408:e="请求超时(408)";break;case 500:e="服务器错误(500)";break;case 501:e="服务未实现(501)";break;case 502:e="网络错误(502)";break;case 503:e="服务不可用(503)";break;case 504:e="网络超时(504)";break;case 505:e="HTTP版本不受支持(505)";break;default:e="连接出错("+t+")!"}return e+"，请检查网络或联系管理员！"}},csSS:function(t,e){}},["NHnr"]);